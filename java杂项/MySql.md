# MySql基础

## 列类型

### 数据类型

#### 整型

![](https://cdn.jsdelivr.net/gh/weidadeyongshi2/th_blogs@main/image/1621935809945-1621935809916.png)



# mysql存储引擎

## MYISAM

- 不支持事务

> mysql最常用的存储引擎

### myisam的优点

- 使用三个文件表示每张表
  - 格式文件——存储表结构的定义（mytable.frm）
  - 数据文件——存储表行的内容（mytable.myD）
  - 索引文件——存储表上的索引（mytable.myI）

- 可被压缩节省空间
- 可以被修改为只读表，提高检索效率。



## InnoDB

### 优点

- 支持事务，行级锁外键等
- 在mysql服务器崩溃后可以提供自动恢复。



## memory

- 缺点

不支持事务，数据容易丢失，所有的数据都存在内存当中。

- 优点

查询速度最快。



## 如何选择存储引擎

查询多的选MYISAM

更新多的选择InnoDB



# 事务（重点）

## 事务的原理

- 开启事务

增删改查的操作不会真正修改硬盘里的数据，而是在缓存里保存操作的历史。

- 提交事务

结束事务，把缓存中的历史操作写到硬盘中，清空之前的缓存数据。

- 回滚事务

结束事务，直接清空缓存数据，不操作硬盘。



- 可以通过save point来设置保存点，设置保存点后可以通过rollback+设置到保存点来回到保存点时的数据。

### 事务的四大特性（ACID）

- 原子性

  事务是最小的工作单元，不可再分。

- 一致性

  事务必须保证多语句同时成功或者同时失败。

- 隔离性

  事务A和事务B之间有隔离

- 持久性

  事务的数据最后必须持久化到硬盘中，事务才算成功的结束。





## 事务的隔离级别

 

- 读未提交

对方事务还没有提交，我们当前事务可以读到对方未提交的数据。

读未提交存在脏读现象，表示读到了脏的数据。

- 读已提交

对方提交的事务我方可以读得到。

这种隔离级别解决了脏读现象。

读已提交存在问题是：不可重复读。

- 可重复读

这种隔离级别解决了：不可重复读问题。

存在的问题：读取到的数据是幻象的。

- 序列化读取/串行读取

解决了所有问题。

存在问题：效率低，需要事务排队。



> oracle默认的隔离级别为读已提交。
>
> mysql默认为可重复读。



# 索引

> 索引相当于给表中的数据添加了目录。

- 优点

提高了搜索的效率，缩小了搜索的范围。

- 缺点

经常被修改的表不适合添加索引，索引也相当于表中的对象。表中数据被修改，索引也需要重新排序，需要重新维护。

- 索引底层采用的数据结构： b + Tree

## 索引的实现原理

![](https://cdn.jsdelivr.net/gh/weidadeyongshi2/th_blogs@main/image/1624795579768-1624795579761.png)

索引会对创建索引的字段排序，排序后分区，然后以b+Tree的方式来存储。
